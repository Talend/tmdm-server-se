## PREREQUISITES ##

1. JWSDP
You'll need Java Web Services Developer Pack 1.5 (JWSDP) installed on your computer to run ANT scripts for WSDL generation.
JWSDP (1.5) isn't on SVN so you'll need to download and install it separately.

2. XDoclet
You'll also need XDoclet (version 1.2.3.patched). This isn't on SVN so you'll need to download and install it separately.

###############################################################################
*******the following explain the steps to add/modify webservice ***********
*******methods in tom/tem**************************************************
###############################################################################
1.add/modify a webservice method in tom ( for MDM Open edition)
  (1) add/modify the webservice method in org.talend.mdm.core.open/src/META-INF/wsdl
  (2) run org.talend.mdm.core.open/wsdl_compile.xml "default" target to generate webservice skeleton classes.
  (3) implement the method in org.talend.mdm.core.open/com.amalto.core.ejb.XtentisWSBean
  (4) run org.talend.mdm.core.open/xdoclet_generate.xml/xdoclet-generation target(this step is necessary only when you add a method) to generate ejb skeleton classes
  (5) run org.talend.mdm.core.open/merge_with_core.xml "default" target. to move the webservice classes to org.talend.mdm.core project.
    
   you NEED to do the following step 2. that mean you need add/modify the webservice both in org.talend.mdm.core.open/org.talend.mdm.core.enterprise
  
2. add/modify a webservice method in tem ( for MDM enterprise edition)
  (1) add/modify the webservice method in org.talend.mdm.core.enterprise/src/META-INF/wsdl
  (2) run org.talend.mdm.core.enterprise/wsdl_compile.xml/default target to generate webservice skeleton classes.
  (3) implement the method in org.talend.mdm.core.enterprise/com.amalto.core.ejb.XtentisEnterpriseWSBean
  (4) run org.talend.mdm.core.enterprise/xdoclet_generate.xml/xdoclet-generation target(this step is necessary only when you add a method) to generate ejb skeleton classes
  (5) run org.talend.mdm.core.enterprise/merge_with_core.xml "default" target. to move the webservice classes to org.talend.mdm.core project.
      Note: if modification is both shared by Open *and* Enterprise editions, this merge is not necessary.
      Note: if Open and Enterprise editions are checked out in different directories, the script must be modified.

3. after that, you need to apply the above modification  to org.talend.mdm.workbench as the following steps:
(1). replace all files in org.talend.mdm.workbench/wsdl/* with those files in org.talend.mdm.core.enterprise/src/META-INF/wsdl
(2). run wsdl_client.xml "default" target  to generate the webservice client classes

4. after that, you need to apply the modification  to org.talend.mdm.webapp.core as the following steps:
(1). run org.talend.mdm.webapp.core/wsdl_client.xml default target to generate the webservice client classes
     Note: if Open and Enterprise editions are checked out in different directories, the config file org.talend.mdm.webapp.core/config.xml must be modified.

5. you NEED apply the modification to TDI/components/TOP team
(1). give the org.talend.mdm.core.enterprise/src/META-INF/wsdl files to them. they generate the webservice classes files themselves.

6. Updating workflow web service stubs. For Bonita workflow to correctly operate, you also need to generate new web service
 stubs. The ANT script in module org.talend.mdm.workflow takes care of this. Run the cxfWSDLToJava target in the wsdl2java.xml
 ANT build file.
 Note (1): this build file uses Apache CXF to generate stubs, which needs to be separately downloaded.
 Note (2): Please note that MDM uses JAXB 2.1 stubs (2.2 is the default in latest Apache CXF versions), to enforce the
 version of JAXB uses, you can specify the "-frontend jaxws21" option. Command line might look like this:

 ./wsdl2java -frontend jaxws21 -client file:/home/fhuaulme/dev/svn/trunk/tem/org.talend.mdm.core.enterprise/src/META-INF/wsdl/webservices.wsdl

 The updated classes are all located in org.talend.mdm.workflow/src/urn_com_amalto_xtentis_webservice. You may commit only
 this directory.


###############################################################################
*******the following explain the steps to add ejb method ***********
###############################################################################

1. add the business ejb method in your ejb class
2. use the {your project}/xdoclet_generate.xml to generate the ejb skeleton classes
(DO NOT add the local/remote classes manually)