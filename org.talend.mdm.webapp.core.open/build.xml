<?xml version="1.0" encoding="UTF-8"?>
<project name="B2BOX" default="all">
    
    <property name="version.props" value="version.properties"/>
        
    <property name="jboss.dir" value="c:/opt/jboss_tem"/>
    <property name="jboss.instance.dir" value="${jboss.dir}/server/default"/>
    <property name="jboss.deploy.dir" value="${jboss.instance.dir}/deploy"/>
    <property name="jboss.instance.lib" value="${jboss.instance.dir}/lib"/>
    
    <property name="jar" value="z.mdm.webapp.core.open.jar"/>

    <!-- ================================= 
          target: all              
         ================================= -->
    <target name="all" depends="version,package,undeploy,deploy" description="--> Browse Items WebApp">
        <!--eclipse.refreshLocal resource="../"/-->
    </target>
    
    <target name="version"  description="Maintain build.date property">
        <buildnumber file="${version.props}" />
        <propertyfile file="${version.props}">
            <entry key="build.date" type="date" value="now" />
        </propertyfile>     
     </target>

    <target name="package">
    	<jar destfile="${jar}">
    	            <zipfileset dir=".">
    	                <include name="version.properties" />
    	                <include name="RELEASE-${major}.${minor}.${rev}-${build.number}.NOTES" />
    	            </zipfileset>
    	<zipfileset dir="bin" />
    	</jar>
    </target>
        
    <target name="undeploy" description="remove packages">      
        <delete>
            <fileset dir="${jboss.instance.lib}" includes="${jar}"/>
        </delete>
    </target>
    
    <target name="deploy">
        <echo>Deploying ${jar} </echo>
        <copy file="${jar}" tofile="${jboss.instance.lib}/${jar}"/>        
    </target>


</project>

